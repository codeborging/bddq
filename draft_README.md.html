<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="/Users/eric/repos/el_pandoc_tools/css/pandoc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1
id="bdd.q-a-tool-for-ai-programming-and-documenting-with-tests-in-q">bdd.q:
A Tool for AI Programming and Documenting with Tests in Q</h1>
<h2 id="overview">Overview</h2>
<p><code>bdd.q</code> is a program designed to facilitate the
documentation and testing of a q function. It allows you to define the
name of a function, provide a detailed specification of its
functionality, describe each argument and the return value, and provide
test cases.</p>
<p><code>bdd.q</code> is designed to also help a programmer make good
use of “AI Pair Programming” systems like:</p>
<ul>
<li><a href="https://github.com/features/copilot">GitHub
Copilot</a></li>
<li><a href="https://www.deepseek.com/">Deep Seek</a></li>
<li><a href="https://codeium.com/">Codeium</a></li>
</ul>
<p>Many agree that test cases serve as excellent documentation because
they:</p>
<ul>
<li>Provide clear examples of how functions are intended to be
used.</li>
<li>Ensure the documentation is always up-to-date, as successful test
cases confirm the accuracy of the documented behavior.</li>
</ul>
<p>This tool allows us to document our code and give AI systems a chance
to generate some of it for us based on careful specs with test
cases.</p>
<h2 id="features">Features</h2>
<ul>
<li><strong>testSetNew</strong>: Specifies where the tests should be
stored.</li>
<li><strong>addDoc</strong>: Defines the function name and provides a
description of what it does.</li>
<li><strong>describeArg</strong>: Describes the arguments of the
function.</li>
<li><strong>describeResult</strong>: Details the expected results.</li>
<li><strong>addTest</strong>: Constructs a test that will be runnable
using <a
href="https://github.com/DataIntellectTech/TorQ/blob/master/tests/k4unit.q"><code>k4unit.q</code></a>.</li>
</ul>
<p>We call these above 5 functions in the code files with the q code we
want to test.</p>
<p>See the example arecursion.q.</p>
<h2 id="usage">Usage</h2>
<p>To use <code>bdd.q</code>, a programmer will load a file that
includes calls to the following functions: <code>testset new</code>,
<code>addDoc</code>, <code>describeArg</code>, and <code>addTest</code>.
Once the setup is complete, running the <code>runTest</code> function
will execute the test cases, indicating which ones succeed and which
fail.</p>
<h3 id="example-workflow">Example Workflow</h3>
<ol type="1">
<li><p><strong>Define the test set location</strong>:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode q"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>testSetNew[<span class="st">`</span><span class="at">:tests/descend.csv; </span><span class="st">`</span><span class="sc">:</span>ddummy.q]</span></code></pre></div></li>
<li><p><strong>Add documentation for a function</strong>:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode q"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>addDoc[<span class="st">&quot;descend&quot;</span>; <span class="st">&quot;returns a list of the descendent </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="st">  IDs of the root ID in the given table tbl.&quot;</span>];</span></code></pre></div></li>
<li><p><strong>Describe an argument to the function</strong>:</p></li>
</ol>
<p>example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode q"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>describeArg[<span class="st">&quot;tbl&quot;</span>; <span class="st">&quot;a table with a column of IDs and a </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="st">  column of parent IDs&quot;</span>];</span></code></pre></div>
<ol start="4" type="1">
<li><p><strong>Describe the expected results</strong>:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode q"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>describeResult[<span class="st">&quot;descend&quot;</span>; <span class="st">&quot;a list of the descendent </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="st">   IDs of the root ID in the given table tbl, </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="st">   including the root ID.&quot;</span>];</span></code></pre></div></li>
<li><p><strong>Add a test case</strong>:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode q"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>addTest[{(asc descend[.car.autoparts;<span class="st">`</span><span class="at">ID;</span><span class="st">`</span>Super_Component_ID;<span class="dv">2</span>]) </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="sc">~</span> <span class="st">`</span><span class="at">s#2 3 4 5 8 9};&quot;find the children of engine.&quot;];</span></span></code></pre></div></li>
<li><p><strong>Run the tests</strong>:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode q"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>q<span class="er">)</span>runTests[]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2024</span>.<span class="fl">06.24</span>T12<span class="sc">:</span><span class="dv">04</span><span class="sc">:</span><span class="fl">04.506</span> start</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2024</span>.<span class="fl">06.24</span>T12<span class="sc">:</span><span class="dv">04</span><span class="sc">:</span><span class="fl">04.506</span> <span class="sc">:</span>tests<span class="sc">/</span>descend.csv <span class="dv">16</span> <span class="fu">test</span>(s)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2024</span>.<span class="fl">06.24</span>T12<span class="sc">:</span><span class="dv">04</span><span class="sc">:</span><span class="fl">04.511</span> end</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>code                                                 timestamp              </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="sc">----------------------------------------------------------------------------</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;(asc descend[.car.autoparts;`ID;`Super_Component_I&quot;</span> <span class="dv">2024</span>.<span class="fl">06.24</span>T12<span class="sc">:</span><span class="dv">04</span><span class="sc">:</span><span class="fl">04.509</span></span></code></pre></div></li>
</ol>
<h2 id="integration-with-copilot">Integration with Copilot</h2>
<p>The system also generates a <code>dummy.q</code> file designed to be
used by tools like Copilot and Codium, enhancing the development
experience by providing context-aware suggestions.</p>
<h2 id="conclusion">Conclusion</h2>
<p><code>bdd.q</code> combines function documentation and testing in a
seamless manner, helping programmers maintain accurate and reliable
codebases. By using this tool, you can ensure that your function
specifications and test cases are always in sync, boosting your
confidence in the correctness of your code.</p>
<h2 id="actually-running-an-example">Actually Running an Example</h2>
<pre><code>cd examples
$ q loader.q -p 6002
q)\l arecursion.q
q)runTests[]
2024.06.24T19:24:35.935 start
2024.06.24T19:24:35.935 :tests/descend.csv 8 test(s)
2024.06.24T19:24:35.937 end
&quot;All tests passed&quot;</code></pre>
</body>
</html>
